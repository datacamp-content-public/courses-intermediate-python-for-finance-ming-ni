---
title: Insert title here
key: 7718ae639bc92371011fc96083a852c3

---
## For Loop with If Statement

```yaml
type: "TitleSlide"
key: "f103c4e425"
```

`@lower_third`

name: Ming Ni
title: Instructor


`@script`
You've done a great job in for loops, congratulations!In this lesson, we'll explore putting different scenarios in your for loop.


---
## Imagine you are investing in Bond...

```yaml
type: "TwoColumns"
key: "3fae2f503d"
```

`@part1`
![Skills? Spying, Killing, Charming...](https://github.com/Jirehmountain/DataCamp/blob/master/james%20bond.jpg)


`@part2`
![OR plotting, manipulating, looping data](https://github.com/Jirehmountain/DataCamp/blob/master/corporate-bonds2-1-638.jpg)


`@script`
Imagine you are to invest in bonds...a corporate bond, not James Bond! You probably keep an eye on all the key data in a data frame, thinking that you've learned to plot, manipulate,filter and loop your data when needed. But one day the credit rating agencies downgrade your bond below investment grade. What would you do so that you could rest assured just as James Bond confidently fulfills his missions every time? Let's first take a look at the data frame.


---
## For Loop over Data Frames

```yaml
type: "FullSlide"
key: "0bc9bafbc5"
```

`@part1`
```Input:
In[1]: import pandas as pd
In[2]: df = pd.read_csv('bond.csv', index_col = 0) 

In[3]: for lab, row in df.iterrows():
           print(lab)
           print(row)

In[4]: plt.plot(df['Yield'], df['Price'])
In[5]: plt.show()```

{{1}} 


```Output:
Out[1]: 
0
Yield            0.02
Price            1539
Credit Rating     AAA
Name: 0, dtype: object
...
4
Yield            0.1
Price            877
Credit Rating     BB
Name: 4, dtype: object```

{{2}}


`@script`
You are very familiar with looping over data frames and printing out row labels and row contents five times. Plot the yield and price columns and let's take a look at their relationship.


---
## If credit rating is downgraded...

```yaml
type: "FullImageSlide"
key: "0d30071749"
```

`@part1`
![Price of a 8%, 10yrs to maturity corporate bond with face value($1000) for different semiannual yields:](https://github.com/Jirehmountain/DataCamp/blob/master/Bond%20price%20and%20yield.png)


`@script`
When credit agencies become aware that this bond has encountered difficulties to pay promised payments, they downgrade its rating to ‘ BB’. Some financial institutions have strict rules not to invest in bonds below investment grade. You definitely wouldn't risk your money unless you feel comfortable with rising probability of default. You'd buy low, but only when the rating is not BB. Python can't recognize BB is lower than AAA, so how can we make it work?


---
## Adding If

```yaml
type: "TwoColumns"
key: "09d8ba4189"
```

`@part1`
- Execute expression only if a condition is met, otherwise forget it {{1}} 

- If statements are mutually exclusive{{2}} 

- Row[] to iterate in the loop{{4}} 

- df.loc[lab, 'new_column_name'] = action to add a new column{{5}}


`@part2`
```Inputs:
In[3]: for lab, row in df.iterrows():  
           if row['Rating'] != 'BB':
               print(row['Price'])
           else:
               df.loc[lab,'buy'] = 0
       print(df)

```
{{3}} 

```Outputs:
Out[1]: 
1539           
1324
1147
1000          
```
{{7}} 

``` Outputs:
Out[2]:
   Yield  Price Rating  buy
0   0.02   1539    AAA  NaN
1   0.04   1324     AA  NaN
2   0.06   1147      A  NaN
3   0.08   1000    BBB  NaN
4   0.10    877     BB  0.0
``` 
{{8}}


`@script`
Setting if statements within a for loop is actually asking Python to execute expression only if a condition is met, otherwise forget it. Recall that if statements are mutually exclusively designed. In this case it means, a credit rating could be either ‘BB’, or any other entries in the rating column. It cannot be the same rating at the same time, nor it can appear twice in the same condition. 

Here is a solution. Set scenario 1 by making row[‘ rating’] not equal to ‘BB’ and scenario 2 by a simple ‘else’ to filter out ‘ BB’. Let’s print the price. See that Python loops only four times. For else condition, instead of a print, we add a new column to mark zero saying at the price we take no action. Check out the output. You’ll see that a new column called ‘ buy’ has been added its 5th entry zero. For all printed out results, this column is filled with‘NaN’.


---
## Recap

```yaml
type: "FullSlide"
key: "b962122e87"
```

`@part1`
- For loop with if/else structure in mutually exclusive way{{1}} 

- Understand iteration of variables in a for loop{{2}} 

- Print/Add new column/Plot in the loop
{{3}} 

```Inputs:
In[3]: for lab, row in df.iterrows():  
           if row['Rating'] != 'BB':
               plt.plot(row['Yield'], row['Price'], 'ro')
               plt.axis([0, 0.10, 0, 1600])
               plt.show()
           else:
               df.loc[lab,'buy'] = 0

In[4]: plt.plot(df['Yield'], df['Price'])
In[5]: plt.show()
```
{{5}}


`@script`
Great! You’ve learned how to construct if statements within a for loop, and you mastered iterating with row data in the loop. You have played with printing out looping results, and adding a new column to the data frame. A final note is that if we replace print with a plot of yield and price within the loop. How many times would Python plot? What actually would it plot out? Try it and you will find that Python literally is drawing like a human, one point at a time!


---
## For Loop with Plot

```yaml
type: "FullImageSlide"
key: "e9d3ee161d"
```

`@part1`
![One Red Dot at a time!](https://github.com/Jirehmountain/DataCamp/blob/master/Steps.png)


`@script`
Great! You’ve learned how to construct if statements within a for loop, and you mastered iterating with row data in the loop. You have played with printing out looping results, and adding a new column to the data frame. A final note is that if we replace print with a plot of yield and price within the loop. How many times would Python plot? What actually would it plot out? Try it and you will find that Python literally is drawing like a human, one point at a time!


---
## Let's For Loop with Your If/Else!

```yaml
type: "FinalSlide"
key: "1ebf44fec4"
```

`@script`
Now it’s time for you to build your for loop with if/else!

